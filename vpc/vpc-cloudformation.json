{
    "AWSTemplateFormatVersion": "2010-09-09",

    "Parameters" : {
        "KeyName" : {
            "Description" : "EC2 instance ssh key",
            "Type" : "AWS::EC2::KeyPair::KeyName"
        },
        "InstanceType" : {
            "Description" : "EC2 instance type",
            "Type" : "String",
            "Default" : "t2.micro",
            "AllowedValues" : [ "t2.micro", "t2.medium", "m5.xlarge","m4.large"]
        },
        "EC2InstanceConnectIP": {
            "Description": "IP address of EC2 Instance Connect service.",
            "Type": "String",
            "Default": "3.16.146.0/29"
        }
    },

    "Resources": {
        
        "VPC": {
            "Type": "AWS::EC2::VPC",
            "Properties": {
              "CidrBlock": "10.0.0.0/16",
              "InstanceTenancy": "default",
              "EnableDnsSupport": "true",
              "EnableDnsHostnames": "true",
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Kohia"
                }
              ]
            }
        },

        "PublicSubnetA": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
              "CidrBlock": "10.0.0.0/24",
              "AvailabilityZone": "us-east-2a",
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Public subnet A"
                }
              ]
            }
        },
        "PublicSubnetB": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
              "CidrBlock": "10.0.1.0/24",
              "AvailabilityZone": "us-east-2b",
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Public subnet B"
                }
              ]
            }
        },
        "PublicSubnetC": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
              "CidrBlock": "10.0.2.0/24",
              "AvailabilityZone": "us-east-2c",
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Public subnet C"
                }
              ]
            }
        },

        "PrivateSubnetA": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
              "CidrBlock": "10.0.100.0/24",
              "AvailabilityZone": "us-east-2a",
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Private subnet A"
                }
              ]
            }
        },
        "PrivateSubnetB": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
              "CidrBlock": "10.0.101.0/24",
              "AvailabilityZone": "us-east-2b",
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Private subnet B"
                }
              ]
            }
        },
        "PrivateSubnetC": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
              "CidrBlock": "10.0.102.0/24",
              "AvailabilityZone": "us-east-2c",
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Private subnet C"
                }
              ]
            }
        },


        "InternetGateway": {
            "Type": "AWS::EC2::InternetGateway",
            "Properties": {
            }
        },
        "DHCPOptions": {
            "Type": "AWS::EC2::DHCPOptions",
            "Properties": {
              "DomainName": "us-east-2.compute.internal",
              "DomainNameServers": [
                "AmazonProvidedDNS"
              ]
            }
        },

        "PublicNetworkACL": {
            "Type": "AWS::EC2::NetworkAcl",
            "Properties": {
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Public Network ACL"
                }
              ]
            }
        },
        "PrivateNetworkACL": {
            "Type": "AWS::EC2::NetworkAcl",
            "Properties": {
              "VpcId": {
                "Ref": "VPC"
              },
              "Tags": [
                {
                  "Key": "Name",
                  "Value": "Private Network ACL"
                }
              ]
            }
        }
    }
             
}